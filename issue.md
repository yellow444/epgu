# Ошибки и рекомендации по документам

Ниже представлено описание выявленных несоответствий и ошибок (сгруппированных по бизнес-процессам), а также рекомендации по их устранению. Дублирующие формулировки удалены, схожие пункты объединены.

---

**1. Формирование и отправка заявления**

- **Суть**: Несоответствие в методах отправки после резервирования.

  - В одном документе упоминается `POST /api/gusmev/order`, в другом – `POST /api/gusmev/push/chunked`. Возникает путаница, какой именно endpoint корректен.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Prilozhenie_60010153_Nalichie_IP_v8.docx_
    - _Specifikaciya_API_EPGU_v1_13.docx_
  - **Рекомендация**: Уточнить единый способ передачи документов после резервирования номера. Если `/push/chunked` актуален, исправить все описания и примеры. Если сервис поддерживает метод `/order`, явно указать эту особенность.

- **Суть**: Неоднозначность в использовании URL.
  - В некоторых примерах загрузка архива идёт через `POST /api/gusmev/order` (с form-data), а в основной спецификации фигурирует `/api/gusmev/push/chunked`. Нет пояснения, когда какой маршрут применяется.
  - **Документ/Раздел**:
    - Спецификация по услуге 60010153 (наличие ИП) – Приложение 3 (Примеры REST-запросов)
    - _Specifikaciya_API_EPGU_v1_13.docx_, раздел (chunked-загрузка)
  - **Рекомендация**: Ясно обозначить, если 60010153 использует `POST /api/gusmev/order` для файлов. Иначе привести всё к `/push/chunked`. Главное – исключить двусмысленность.

---

**2. Валидация XML-запросов (req.xml / piev_epgu.xml)**

- **Суть**: Разные коды услуг / разная обязательность полей.

  - Где-то `ServiceCode = 10001449665`, а в другом документе – другой. Также поле `ExternalKey` в одном случае обязательно, в другом – нет.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Prilozhenie_60010153_Nalichie_IP_v8.docx_
    - _Specifikaciya_API_EPGU_v1_13.docx_
  - **Рекомендация**: Сопоставить код услуги и статус полей с актуальной версией ФРГУ/основной спецификации. Уточнить, в каких сценариях `ExternalKey` обязателен.

- **Суть**: Отсутствие значения `DsContentType = 21`.

  - В одной спецификации оно есть (подпись доверенности), в другой отсутствует, приводя к ошибкам валидации.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Prilozhenie_60010153_Nalichie_IP_v8.docx_
    - _Specifikaciya_API_EPGU_v1_13.docx_
  - **Рекомендация**: Добавить пропущенное значение в схему/таблицу. Согласовать, чтобы избежать ошибок.

- **Суть**: Различия в диапазоне значений TrusteeDoctype.
  - Один документ указывает 01–09, другой – 01–10.
  - **Документ/Раздел**:
    - _Раздел с описанием типов документов доверенности_ (спецификаций ЕПГУ/услуг)
  - **Рекомендация**: Унифицировать диапазон. Если «10» действительно используется, указать его во всех документах.

---

**3. Оформление доверенностей / полномочий**

- **Суть**: Неверная ссылка в «Отправка документов… в Госключ».

  - Раздел «Общие положения» ссылается на п. 3.1 и 3.2 Регламента, в то время как процедура описана в п. 3.3.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Otpravka_dokumentov_na_podpis_v_Gosklyuch_v1.8.docx_, «Общие положения»
    - _Регламент подключения к API Госуслуг, вер. 1.8_
  - **Рекомендация**: Исправить ссылки (вероятно, на 3.3).

- **Суть**: Устаревшее упоминание SAML 2.0.

  - В методических рекомендациях ЕСИА есть пример с SAML, но в другом месте сказано о прекращении поддержки.
  - **Документ/Раздел**:
    - _Методические рекомендации по использованию ЕСИА, версия 2.59_ (разд. 3.1 и приложение с описанием SAML)
  - **Рекомендация**: Определить статус SAML (если не поддерживается, убрать или пометить как архивный). Избежать ввода в заблуждение.

- **Суть**: ЛК ИЭП: расхождение между журналом изменений и текстом.
  - В руководстве для вендора (3.2) говорится «ссылки на ЛК ИЭП убраны», но фактически есть инструкция про ЛК ИЭП.
  - **Документ/Раздел**:
    - _Руководство для организации-вендора по формированию API-Key, вер. 3.2_ (раздел 3, табл. изменений)
  - **Рекомендация**: Если ИЭП не используется, убрать упоминания. Если используется, скорректировать журнал изменений.

---

**4. Работа через Техпортал / Ведение ИС**

- **Суть**: Устаревшие сведения по браузерам.

  - Техпортал ЕСИА (1.3.28) указывает IE и Windows XP, которые давно не поддерживаются.
  - **Документ/Раздел**:
    - _rp-esia-tehportal-1328.pdf_, разд. 1.2–1.3, стр. 7
  - **Рекомендация**: Удалить упоминание IE/XP, указать современные ОС/браузеры.

- **Суть**: Дублирование версии в журнале изменений.

  - Одна и та же версия (1.3.13) записана дважды.
  - **Документ/Раздел**:
    - _rp-esia-tehportal-1328.pdf_, таблица изменений (стр. 3–4)
  - **Рекомендация**: Присвоить уникальный номер (например, вторую 1.3.13 сделать 1.3.14).

- **Суть**: Повторяющаяся гиперссылка.
  - В конце раздела 1.3 техпортала ЕСИА дважды идёт ссылка на один документ.
  - **Документ/Раздел**:
    - _rp-esia-tehportal-1328.pdf_, конец разд. 1.3 (стр. 8)
  - **Рекомендация**: Удалить дубликат или объединить в один пункт.

---

**5. Подключение через СМЭВ / TLS**

- **Суть**: Нет сведений о СМЭВ 4 в регламенте.

  - Регламент (1.8) не упоминает работу через СМЭВ, а в основной спецификации (1.13) она описана.
  - **Документ/Раздел**:
    - _Регламент подключения к API Госуслуг, вер. 1.8_
    - _Specifikaciya_API_EPGU_v1_13.docx_, разд. 1.3
  - **Рекомендация**: Добавить информацию о СМЭВ 4 (либо указать, что эта версия регламента не реализует данную опцию).

- **Суть**: Неполные указания по ГОСТ TLS.
  - В 1.2 основной спецификации нет подробностей о проверке соединения, сертификатов.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_v1_13.docx_, разд. 1.2
  - **Рекомендация**: Дополнить раздел, описав проверку цепочек сертификатов, применяемые крипто-наборы.

---

**6. Методы API (структура / номера / способы вызова)**

- **Суть**: Ошибка в номерах разделов «Создание заявления» и «Загрузка архива».

  - В спецификации по Госключ (1.8) оба пункта ошибочно имеют номер «3.2».
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Otpravka_dokumentov_na_podpis_v_Gosklyuch_v1.8.docx_, Табл. 2
    - _Основная спецификация_
  - **Рекомендация**: Синхронизировать номера согласно актуальному документу (вероятно, «Загрузка архива» должна быть 3.3).

- **Суть**: Противоречия в поддерживаемых методах.

  - Таблица для Госключ v1.8 говорит «Получение статусов заявлений» не поддерживается, а история изменений указывает другое.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Otpravka_dokumentov_na_podpis_v_Gosklyuch_v1.8.docx_, Табл. 2
  - **Рекомендация**: Уточнить в таблице реальное состояние; если поддерживается, явно это указать.

- **Суть**: Изменение методов getOrdersStatus / getUpdatedAfter (POST → GET).

  - В новых версиях (≥ 1.11) делается GET, но старые примеры могут быть указаны как POST.
  - **Документ/Раздел**:
    - _Спецификация API ЕПГУ (разные версии)_
  - **Рекомендация**: Привести все документы к единому формату, отразив, что теперь метод вызывается GET.

- **Суть**: Лишний «/» перед query-параметрами.
  - Где-то написано `GET /api/gusmev/order/getUpdatedAfter/?pageNum=…` вместо `GET /api/gusmev/order/getUpdatedAfter?pageNum=…`.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_v1_13.docx_, разд. 2 (Таблица 3)
  - **Рекомендация**: Убрать слэш перед знаком вопроса.

---

Таким образом, каждая проблема имеет привязку к конкретному документу и разделу, а также короткую рекомендацию по её решению. При необходимости следует уточнить, в каких версиях документов сохраняются вышеуказанные несоответствия, и вносить правки в актуальные ветки спецификаций.

# Ошибки и рекомендации по документам

Ниже представлено описание выявленных несоответствий и ошибок (сгруппированных по бизнес-процессам), а также рекомендации по их устранению. Дублирующие формулировки удалены, схожие пункты объединены.

---

**1. Формирование и отправка заявления**

- **Суть**: Несоответствие в методах отправки после резервирования.

  - В одном документе упоминается `POST /api/gusmev/order`, в другом – `POST /api/gusmev/push/chunked`. Возникает путаница, какой именно endpoint корректен.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Prilozhenie_60010153_Nalichie_IP_v8.docx_
    - _Specifikaciya_API_EPGU_v1_13.docx_
  - **Рекомендация**: Уточнить единый способ передачи документов после резервирования номера. Если `/push/chunked` актуален, исправить все описания и примеры. Если сервис поддерживает метод `/order`, явно указать эту особенность.

- **Суть**: Неоднозначность в использовании URL.
  - В некоторых примерах загрузка архива идёт через `POST /api/gusmev/order` (с form-data), а в основной спецификации фигурирует `/api/gusmev/push/chunked`. Нет пояснения, когда какой маршрут применяется.
  - **Документ/Раздел**:
    - Спецификация по услуге 60010153 (наличие ИП) – Приложение 3 (Примеры REST-запросов)
    - _Specifikaciya_API_EPGU_v1_13.docx_, раздел (chunked-загрузка)
  - **Рекомендация**: Ясно обозначить, если 60010153 использует `POST /api/gusmev/order` для файлов. Иначе привести всё к `/push/chunked`. Главное – исключить двусмысленность.

---

**2. Валидация XML-запросов (req.xml / piev_epgu.xml)**

- **Суть**: Разные коды услуг / разная обязательность полей.

  - Где-то `ServiceCode = 10001449665`, а в другом документе – другой. Также поле `ExternalKey` в одном случае обязательно, в другом – нет.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Prilozhenie_60010153_Nalichie_IP_v8.docx_
    - _Specifikaciya_API_EPGU_v1_13.docx_
  - **Рекомендация**: Сопоставить код услуги и статус полей с актуальной версией ФРГУ/основной спецификации. Уточнить, в каких сценариях `ExternalKey` обязателен.

- **Суть**: Отсутствие значения `DsContentType = 21`.

  - В одной спецификации оно есть (подпись доверенности), в другой отсутствует, приводя к ошибкам валидации.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Prilozhenie_60010153_Nalichie_IP_v8.docx_
    - _Specifikaciya_API_EPGU_v1_13.docx_
  - **Рекомендация**: Добавить пропущенное значение в схему/таблицу. Согласовать, чтобы избежать ошибок.

- **Суть**: Различия в диапазоне значений TrusteeDoctype.
  - Один документ указывает 01–09, другой – 01–10.
  - **Документ/Раздел**:
    - _Раздел с описанием типов документов доверенности_ (спецификаций ЕПГУ/услуг)
  - **Рекомендация**: Унифицировать диапазон. Если «10» действительно используется, указать его во всех документах.

---

**3. Оформление доверенностей / полномочий**

- **Суть**: Неверная ссылка в «Отправка документов… в Госключ».

  - Раздел «Общие положения» ссылается на п. 3.1 и 3.2 Регламента, в то время как процедура описана в п. 3.3.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Otpravka_dokumentov_na_podpis_v_Gosklyuch_v1.8.docx_, «Общие положения»
    - _Регламент подключения к API Госуслуг, вер. 1.8_
  - **Рекомендация**: Исправить ссылки (вероятно, на 3.3).

- **Суть**: Устаревшее упоминание SAML 2.0.

  - В методических рекомендациях ЕСИА есть пример с SAML, но в другом месте сказано о прекращении поддержки.
  - **Документ/Раздел**:
    - _Методические рекомендации по использованию ЕСИА, версия 2.59_ (разд. 3.1 и приложение с описанием SAML)
  - **Рекомендация**: Определить статус SAML (если не поддерживается, убрать или пометить как архивный). Избежать ввода в заблуждение.

- **Суть**: ЛК ИЭП: расхождение между журналом изменений и текстом.
  - В руководстве для вендора (3.2) говорится «ссылки на ЛК ИЭП убраны», но фактически есть инструкция про ЛК ИЭП.
  - **Документ/Раздел**:
    - _Руководство для организации-вендора по формированию API-Key, вер. 3.2_ (раздел 3, табл. изменений)
  - **Рекомендация**: Если ИЭП не используется, убрать упоминания. Если используется, скорректировать журнал изменений.

---

**4. Работа через Техпортал / Ведение ИС**

- **Суть**: Устаревшие сведения по браузерам.

  - Техпортал ЕСИА (1.3.28) указывает IE и Windows XP, которые давно не поддерживаются.
  - **Документ/Раздел**:
    - _rp-esia-tehportal-1328.pdf_, разд. 1.2–1.3, стр. 7
  - **Рекомендация**: Удалить упоминание IE/XP, указать современные ОС/браузеры.

- **Суть**: Дублирование версии в журнале изменений.

  - Одна и та же версия (1.3.13) записана дважды.
  - **Документ/Раздел**:
    - _rp-esia-tehportal-1328.pdf_, таблица изменений (стр. 3–4)
  - **Рекомендация**: Присвоить уникальный номер (например, вторую 1.3.13 сделать 1.3.14).

- **Суть**: Повторяющаяся гиперссылка.
  - В конце раздела 1.3 техпортала ЕСИА дважды идёт ссылка на один документ.
  - **Документ/Раздел**:
    - _rp-esia-tehportal-1328.pdf_, конец разд. 1.3 (стр. 8)
  - **Рекомендация**: Удалить дубликат или объединить в один пункт.

---

**5. Подключение через СМЭВ / TLS**

- **Суть**: Нет сведений о СМЭВ 4 в регламенте.

  - Регламент (1.8) не упоминает работу через СМЭВ, а в основной спецификации (1.13) она описана.
  - **Документ/Раздел**:
    - _Регламент подключения к API Госуслуг, вер. 1.8_
    - _Specifikaciya_API_EPGU_v1_13.docx_, разд. 1.3
  - **Рекомендация**: Добавить информацию о СМЭВ 4 (либо указать, что эта версия регламента не реализует данную опцию).

- **Суть**: Неполные указания по ГОСТ TLS.
  - В 1.2 основной спецификации нет подробностей о проверке соединения, сертификатов.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_v1_13.docx_, разд. 1.2
  - **Рекомендация**: Дополнить раздел, описав проверку цепочек сертификатов, применяемые крипто-наборы.

---

**6. Методы API (структура / номера / способы вызова)**

- **Суть**: Ошибка в номерах разделов «Создание заявления» и «Загрузка архива».

  - В спецификации по Госключ (1.8) оба пункта ошибочно имеют номер «3.2».
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Otpravka_dokumentov_na_podpis_v_Gosklyuch_v1.8.docx_, Табл. 2
    - _Основная спецификация_
  - **Рекомендация**: Синхронизировать номера согласно актуальному документу (вероятно, «Загрузка архива» должна быть 3.3).

- **Суть**: Противоречия в поддерживаемых методах.

  - Таблица для Госключ v1.8 говорит «Получение статусов заявлений» не поддерживается, а история изменений указывает другое.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_Otpravka_dokumentov_na_podpis_v_Gosklyuch_v1.8.docx_, Табл. 2
  - **Рекомендация**: Уточнить в таблице реальное состояние; если поддерживается, явно это указать.

- **Суть**: Изменение методов getOrdersStatus / getUpdatedAfter (POST → GET).

  - В новых версиях (≥ 1.11) делается GET, но старые примеры могут быть указаны как POST.
  - **Документ/Раздел**:
    - _Спецификация API ЕПГУ (разные версии)_
  - **Рекомендация**: Привести все документы к единому формату, отразив, что теперь метод вызывается GET.

- **Суть**: Лишний «/» перед query-параметрами.
  - Где-то написано `GET /api/gusmev/order/getUpdatedAfter/?pageNum=…` вместо `GET /api/gusmev/order/getUpdatedAfter?pageNum=…`.
  - **Документ/Раздел**:
    - _Specifikaciya_API_EPGU_v1_13.docx_, разд. 2 (Таблица 3)
  - **Рекомендация**: Убрать слэш перед знаком вопроса.

---
